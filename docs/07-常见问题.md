# 常见问题 - FAQ

遇到问题？别着急，这里收集了最常见的问题和解决方法。

## 🔧 安装相关问题

### Q1: Python 模块导入失败

**错误信息**：
```
ModuleNotFoundError: No module named 'panda_xxx'
```

**解决方法**：
```bash
# 确保已经安装了所有子模块
cd panda_common && pip install -e . && cd ..
cd panda_data && pip install -e . && cd ..
cd panda_data_hub && pip install -e . && cd ..
cd panda_factor && pip install -e . && cd ..
cd panda_factor_server && pip install -e . && cd ..
cd panda_llm && pip install -e . && cd ..
cd panda_web && pip install -e . && cd ..
```

### Q2: MongoDB 连接失败

**错误信息**：
```
Connection refused
无法连接到 MongoDB
```

**解决方法**：
1. 检查 MongoDB 是否启动
2. 检查配置文件中的地址和端口
3. 检查防火墙设置

### Q3: 依赖包安装失败

**解决方法**：
```bash
# 升级 pip
pip install --upgrade pip

# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## 📊 数据相关问题

### Q4: 没有数据或数据为空

**可能原因**：
- 数据未加载到数据库
- 数据源配置错误
- 日期范围不对

**解决方法**：
1. 检查数据是否已加载（运行数据清洗）
2. 检查数据源配置（config.yaml）
3. 检查日期格式（YYYYMMDD）

### Q5: 数据清洗失败

**可能原因**：
- 数据源账号密码错误
- 网络连接问题
- 数据源 API 限制

**解决方法**：
1. 检查数据源账号密码
2. 检查网络连接
3. 查看错误日志

## 🔢 因子计算问题

### Q6: 因子创建失败

**错误信息**：
```
因子创建失败
代码语法错误
```

**解决方法**：
1. 检查代码语法
2. 检查是否使用了不存在的函数
3. 查看错误日志获取详细信息

### Q7: 因子值全是 NaN

**可能原因**：
- 数据不足（没有足够的历史数据）
- 计算逻辑错误
- DELAY 函数参数过大

**解决方法**：
1. 检查数据是否完整
2. 检查 DELAY 函数的参数（需要至少 N 天的历史数据）
3. 检查计算逻辑是否正确

### Q8: 因子计算很慢

**可能原因**：
- 数据量太大
- 计算逻辑太复杂
- 没有使用持久化

**解决方法**：
1. 使用持久化功能，将计算结果保存
2. 优化计算逻辑，避免重复计算
3. 减少数据范围（先在小范围测试）

## 📈 因子分析问题

### Q9: 因子分析失败

**可能原因**：
- 因子值全是 NaN
- 数据范围不对
- 参数配置错误

**解决方法**：
1. 检查因子值是否有效
2. 检查分析参数（日期范围、股票池等）
3. 查看错误日志

### Q10: IC 值很低或为负

**可能原因**：
- 因子逻辑有问题
- 数据质量问题
- 市场环境变化

**解决方法**：
1. 重新检查因子逻辑
2. 检查数据质量
3. 尝试调整参数
4. 考虑反向使用（如果 IC 为负）

## 🌐 服务启动问题

### Q11: 端口被占用

**错误信息**：
```
Address already in use
端口已被占用
```

**解决方法**：
1. 查找占用端口的程序并关闭
2. 修改配置文件中的端口号
3. 使用 `lsof -i :端口号` 查找占用进程（Mac/Linux）

### Q12: Web 界面无法访问

**解决方法**：
1. 检查服务是否启动
2. 检查端口是否正确
3. 检查防火墙设置
4. 尝试使用 `localhost` 而不是 `127.0.0.1`

## 💻 代码相关问题

### Q13: 函数不存在

**错误信息**：
```
函数 XXX 不存在
```

**解决方法**：
1. 查看[函数和算子支持情况](https://www.pandaai.online/community/article/72)
2. 检查函数名拼写是否正确
3. 检查是否使用了正确的大小写

### Q14: 数据类型错误

**错误信息**：
```
类型错误
数据类型不匹配
```

**解决方法**：
1. 检查输入数据的类型
2. 确保使用正确的函数
3. 查看函数文档了解参数要求

## 🔍 调试技巧

### 技巧 1：查看日志

日志文件通常在项目根目录，查看日志可以了解详细的错误信息。

### 技巧 2：小范围测试

先在小范围数据上测试（如单只股票、短时间范围），确认逻辑正确后再扩大范围。

### 技巧 3：使用 AI 助手

如果系统集成了 AI 助手，可以询问它如何解决问题。

## 📞 获取帮助

如果以上方法都无法解决问题：

1. **查看日志**：查看详细的错误日志
2. **联系技术支持**：通过微信群或 GitHub Issues
3. **查看文档**：查看其他相关文档

---

**继续学习**：[最佳实践](./08-最佳实践.md) - 学习更多经验和技巧 🚀

